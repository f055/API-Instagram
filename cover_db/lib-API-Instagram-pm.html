<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!--
This file was generated by Devel::Cover Version 1.15
Devel::Cover is copyright 2001-2012, Paul Johnson (paul@pjcj.net)
Devel::Cover is free. It is licensed under the same terms as Perl itself.
The latest version of Devel::Cover should be available from my homepage:
http://www.pjcj.net
-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
    <meta http-equiv="Content-Language" content="en-us"></meta>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <title>File Coverage: lib/API/Instagram.pm</title>
</head>
<body>
<h1>File Coverage</h1>
<table>
<tr><td class="h" align="right">File:</td><td align="left">lib/API/Instagram.pm</td></tr>
<tr><td class="h" align="right">Coverage:</td><td align="left" class="c1">88.2%</td></tr>
</table>
<div><br/></div>
<table>
<tr><th>line</th><th>stmt</th><th>bran</th><th>cond</th><th>sub</th><th>pod</th><th>time</th><th>code</th></tr>
<tr><td class="h">1</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">package API::Instagram;</td></tr>
<tr><td class="h">2</td><td colspan="7"></td></tr><tr><td class="h">3</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># ABSTRACT: Object Oriented Interface for the Instagram REST and Search APIs</td></tr>
<tr><td class="h">4</td><td colspan="7"></td></tr><tr><td class="h">5</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">our $VERSION = &#39;0.012&#39;;</td></tr>
<tr><td class="h">6</td><td colspan="7"></td></tr><tr><td class="h">7</td><td><div class="c3">366</div><div class="c3">366</div><div class="c3">366</div></td><td></td><td></td><td><div class="c3"><a href="lib-API-Instagram-pm--subroutine.html#L7">366</a></div></td><td></td><td><div>133482</div><div>3776838</div><div>1828</div></td><td class="s">use Moo;</td></tr>
<tr><td class="h">8</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># with &#39;MooX::Singleton&#39;;</td></tr>
<tr><td class="h">9</td><td colspan="7"></td></tr><tr><td class="h">10</td><td><div class="c3">366</div><div class="c3">366</div><div class="c3">366</div></td><td></td><td></td><td><div class="c3"><a href="lib-API-Instagram-pm--subroutine.html#L10">366</a></div></td><td></td><td><div>349425</div><div>358</div><div>17275</div></td><td class="s">use Carp;</td></tr>
<tr><td class="h">11</td><td><div class="c3">366</div><div class="c3">366</div><div class="c3">366</div></td><td></td><td></td><td><div class="c3"><a href="lib-API-Instagram-pm--subroutine.html#L11">366</a></div></td><td></td><td><div>1144</div><div>356</div><div>5699</div></td><td class="s">use strict;</td></tr>
<tr><td class="h">12</td><td><div class="c3">366</div><div class="c3">366</div><div class="c3">366</div></td><td></td><td></td><td><div class="c3"><a href="lib-API-Instagram-pm--subroutine.html#L12">366</a></div></td><td></td><td><div>978</div><div>287</div><div>8475</div></td><td class="s">use warnings;</td></tr>
<tr><td class="h">13</td><td><div class="c3">366</div><div class="c3">366</div><div class="c3">366</div></td><td></td><td></td><td><div class="c3"><a href="lib-API-Instagram-pm--subroutine.html#L13">366</a></div></td><td></td><td><div>1036</div><div>336</div><div>12805</div></td><td class="s">use Digest::MD5 &#39;md5_hex&#39;;</td></tr>
<tr><td class="h">14</td><td colspan="7"></td></tr><tr><td class="h">15</td><td><div class="c3">366</div><div class="c3">366</div><div class="c3">366</div></td><td></td><td></td><td><div class="c3"><a href="lib-API-Instagram-pm--subroutine.html#L15">366</a></div></td><td></td><td><div>152840</div><div>1050823</div><div>7973</div></td><td class="s">use URI;</td></tr>
<tr><td class="h">16</td><td><div class="c3">366</div><div class="c3">366</div><div class="c3">366</div></td><td></td><td></td><td><div class="c3"><a href="lib-API-Instagram-pm--subroutine.html#L16">366</a></div></td><td></td><td><div>1462</div><div>382</div><div>35162</div></td><td class="s">use JSON;</td></tr>
<tr><td class="h">17</td><td><div class="c3">366</div><div class="c3">366</div><div class="c3">366</div></td><td></td><td></td><td><div class="c3"><a href="lib-API-Instagram-pm--subroutine.html#L17">366</a></div></td><td></td><td><div>110541</div><div>6327128</div><div>8391</div></td><td class="s">use Furl;</td></tr>
<tr><td class="h">18</td><td colspan="7"></td></tr><tr><td class="h">19</td><td><div class="c3">366</div><div class="c3">366</div><div class="c3">366</div></td><td></td><td></td><td><div class="c3"><a href="lib-API-Instagram-pm--subroutine.html#L19">366</a></div></td><td></td><td><div>105115</div><div>732</div><div>8853</div></td><td class="s">use API::Instagram::User;</td></tr>
<tr><td class="h">20</td><td><div class="c3">366</div><div class="c3">366</div><div class="c3">366</div></td><td></td><td></td><td><div class="c3"><a href="lib-API-Instagram-pm--subroutine.html#L20">366</a></div></td><td></td><td><div>110740</div><div>572</div><div>7827</div></td><td class="s">use API::Instagram::Location;</td></tr>
<tr><td class="h">21</td><td><div class="c3">366</div><div class="c3">366</div><div class="c3">366</div></td><td></td><td></td><td><div class="c3"><a href="lib-API-Instagram-pm--subroutine.html#L21">366</a></div></td><td></td><td><div>90661</div><div>575</div><div>7242</div></td><td class="s">use API::Instagram::Tag;</td></tr>
<tr><td class="h">22</td><td><div class="c3">366</div><div class="c3">343</div><div class="c3">343</div></td><td></td><td></td><td><div class="c3"><a href="lib-API-Instagram-pm--subroutine.html#L22">366</a></div></td><td></td><td><div>157738</div><div>601</div><div>8655</div></td><td class="s">use API::Instagram::Media;</td></tr>
<tr><td class="h">23</td><td><div class="c3">343</div><div class="c3">343</div><div class="c3">343</div></td><td></td><td></td><td><div class="c3"><a href="lib-API-Instagram-pm--subroutine.html#L23">343</a></div></td><td></td><td><div>93845</div><div>537</div><div>7098</div></td><td class="s">use API::Instagram::Media::Comment;</td></tr>
<tr><td class="h">24</td><td><div class="c3">343</div><div class="c3">343</div><div class="c3">343</div></td><td></td><td></td><td><div class="c3"><a href="lib-API-Instagram-pm--subroutine.html#L24">343</a></div></td><td></td><td><div>86392</div><div>532</div><div>380473</div></td><td class="s">use API::Instagram::Search;</td></tr>
<tr><td class="h">25</td><td colspan="7"></td></tr><tr><td class="h">26</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">has client_id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; ( is =&gt; &#39;ro&#39;, required =&gt; 1 );</td></tr>
<tr><td class="h">27</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">has client_secret&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; ( is =&gt; &#39;ro&#39;, required =&gt; 1 );</td></tr>
<tr><td class="h">28</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">has redirect_uri&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; ( is =&gt; &#39;ro&#39;, required =&gt; 1 );</td></tr>
<tr><td class="h">29</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">has scope&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; ( is =&gt; &#39;ro&#39;, default =&gt; sub { &#39;basic&#39; } );</td></tr>
<tr><td class="h">30</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">has response_type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; ( is =&gt; &#39;ro&#39;, default =&gt; sub { &#39;code&#39;&nbsp;&nbsp;} );</td></tr>
<tr><td class="h">31</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">has grant_type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; ( is =&gt; &#39;ro&#39;, default =&gt; sub { &#39;authorization_code&#39; } );</td></tr>
<tr><td class="h">32</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">has code&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; ( is =&gt; &#39;rw&#39;, isa =&gt; sub { confess &quot;Code not provided&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless $_[0] } );</td></tr>
<tr><td class="h">33</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">has access_token&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; ( is =&gt; &#39;rw&#39;, isa =&gt; sub { confess &quot;No access token provided&quot; unless $_[0] } );</td></tr>
<tr><td class="h">34</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">has no_cache&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; ( is =&gt; &#39;rw&#39;, default =&gt; sub { 0 } );</td></tr>
<tr><td class="h">35</td><td colspan="7"></td></tr><tr><td class="h">36</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">has _ua&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; ( is =&gt; &#39;ro&#39;, default =&gt; sub { Furl-&gt;new() } );</td></tr>
<tr><td class="h">37</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">has _obj_cache&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; ( is =&gt; &#39;ro&#39;, default =&gt; sub { { User =&gt; {}, Media =&gt; {}, Location =&gt; {}, Tag =&gt; {}, &#39;Media::Comment&#39; =&gt; {} } } );</td></tr>
<tr><td class="h">38</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">has _endpoint_url&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; ( is =&gt; &#39;ro&#39;, default =&gt; sub { &#39;https://api.instagram.com/v1&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} );</td></tr>
<tr><td class="h">39</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">has _authorize_url&nbsp;&nbsp;&nbsp;&nbsp;=&gt; ( is =&gt; &#39;ro&#39;, default =&gt; sub { &#39;https://api.instagram.com/oauth/authorize&#39;&nbsp;&nbsp;&nbsp;&nbsp;} );</td></tr>
<tr><td class="h">40</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">has _access_token_url =&gt; ( is =&gt; &#39;ro&#39;, default =&gt; sub { &#39;https://api.instagram.com/oauth/access_token&#39; } );</td></tr>
<tr><td class="h">41</td><td colspan="7"></td></tr><tr><td class="h">42</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">has _debug =&gt; ( is =&gt; &#39;rw&#39;, lazy =&gt; 1 );</td></tr>
<tr><td class="h">43</td><td colspan="7"></td></tr><tr><td class="h">44</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my $instance;</td></tr>
<tr><td class="h">45</td><td><div class="c3">319</div></td><td></td><td></td><td><div class="c3"><a href="lib-API-Instagram-pm--subroutine.html#L45">319</a></div></td><td><div class="c0">0</div></td><td><div>7929</div></td><td class="s">sub BUILD { $instance = shift }</td></tr>
<tr><td class="h">46</td><td colspan="7"></td></tr><tr><td class="h">47 - 158</td><td colspan="6"></td><td class="s"><pre>=head1 SYNOPSIS

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use API::Instagram;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $instagram = API::Instagram-&gt;new({
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;client_id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $client_id,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;client_secret =&gt; $client_secret,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;redirect_uri&nbsp;&nbsp;=&gt; &#39;http://localhost&#39;,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Authenticated user feed
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $my_user = $instagram-&gt;user;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $feed&nbsp;&nbsp;&nbsp;&nbsp;= $my_user-&gt;feed( count =&gt; 5 );

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for my $media ( @$feed ) {

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf &quot;Caption: %s\n&quot;, $media-&gt;caption;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf &quot;Posted by %s at %s (%d likes)\n\n&quot;, $media-&gt;user-&gt;username, $media-&gt;created_time, $media-&gt;likes;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}


=head1 DESCRIPTION

This module implements an OO interface to Instagram REST API.


=head2 Authentication

Instagram API uses the OAuth2 for authentication, requering a C&lt;client_id&gt; and
C&lt;client_secret&gt;. See L&lt;http://instagr.am/developer/register/&gt; for details.

=head3 Authorize

Get the AUTH URL to authenticate.

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use API::Instagram;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $instagram = API::Instagram-&gt;new({
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;client_id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;xxxxxxxxxx&#39;,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;client_secret =&gt; &#39;xxxxxxxxxx&#39;,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;redirect_uri&nbsp;&nbsp;=&gt; &#39;http://localhost&#39;,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scope&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;basic&#39;,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response_type =&gt; &#39;code&#39;,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;granty_type&nbsp;&nbsp;&nbsp;=&gt; &#39;authorization_code&#39;,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print $instagram-&gt;get_auth_url;


=head3 Authenticate

After authorization, Instagram will redirected the user to the URL in
C&lt;redirect_uri&gt; with a code as an URL query parameter. This code is needed
to obtain an acess token.

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$instagram-&gt;code( $code );
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $access_token = $instagram-&gt;get_access_token;

=head3 Request

With the access token its possible to do Instagram API requests using the
authenticated user credentials.

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$instagram-&gt;access_token( $access_token );
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $me = $instagram-&gt;user;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print $me-&gt;full_name;


=method new

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $instagram = API::Instagram-&gt;new({
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;client_id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $client_id,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;client_secret =&gt; $client_secret,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;redirect_uri&nbsp;&nbsp;=&gt; &#39;http://localhost&#39;,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scope&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;basic&#39;,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response_type =&gt; &#39;code&#39;,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;granty_type&nbsp;&nbsp;&nbsp;=&gt; &#39;authorization_code&#39;,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no_cache&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; 1,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});

Returns an L&lt;API::Instagram&gt; object.

Set C&lt;client_id&gt;, C&lt;client_secret&gt; and C&lt;redirect_uri&gt; with the ones registered
to your application. See L&lt;http://instagram.com/developer/clients/manage/&gt;.

C&lt;scope&gt; is the scope of access. See L&lt;http://instagram.com/developer/authentication/#scope&gt;.

C&lt;response_type&gt; and C&lt;granty_type&gt; do no vary. See L&lt;http://instagram.com/developer/authentication/&gt;.

By default, L&lt;API::Instagram&gt; caches created objects to avoid duplications. You can disable
this feature setting a true value to C&lt;no_chace&gt; parameter.

=method instance

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $instagram = API::Instagram-&gt;instance;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print $instagram-&gt;user-&gt;full_name;

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $instagram = API::Instagram-&gt;instance({
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;client_id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $client_id,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;client_secret =&gt; $client_secret,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;redirect_uri&nbsp;&nbsp;=&gt; &#39;http://localhost&#39;,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});


Returns the singleton instance of L&lt;API::Instagram&gt;.

Note: if no instance was created before, creates a new L&lt;API::Instagram&gt; object initialized with arguments provided and then returns it.

=cut</pre></td></tr>
<tr><td class="h">159</td><td><div class="c3">632</div></td><td></td><td><div class="c0"><a href="lib-API-Instagram-pm--condition.html#L159">33</a></div></td><td><div class="c3"><a href="lib-API-Instagram-pm--subroutine.html#L159">632</a></div></td><td><div class="c0">0</div></td><td><div>4445</div></td><td class="s">sub instance { $instance //= shift-&gt;new(@_) }</td></tr>
<tr><td class="h">160</td><td colspan="7"></td></tr><tr><td class="h">161</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=method get_auth_url</td></tr>
<tr><td class="h">162</td><td colspan="7"></td></tr><tr><td class="h">163</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $auth_url = $instagram-&gt;get_auth_url;</td></tr>
<tr><td class="h">164</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print $auth_url;</td></tr>
<tr><td class="h">165</td><td colspan="7"></td></tr><tr><td class="h">166</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">Returns an Instagram authorization URL.</td></tr>
<tr><td class="h">167</td><td colspan="7"></td></tr><tr><td class="h">168</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=cut</td></tr>
<tr><td class="h">169</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub get_auth_url { </td></tr>
<tr><td class="h">170</td><td><div class="c3">48</div></td><td></td><td></td><td><div class="c3"><a href="lib-API-Instagram-pm--subroutine.html#L170">48</a></div></td><td><div class="c0">0</div></td><td><div>75</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">171</td><td colspan="7"></td></tr><tr><td class="h">172</td><td><div class="c3">48</div></td><td><div class="c3" title="T/F"><a href="lib-API-Instagram-pm--branch.html#L172">100</a></div></td><td></td><td></td><td></td><td><div>742</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;carp &quot;User already authorized with code: &quot; . $self-&gt;code if $self-&gt;code;</td></tr>
<tr><td class="h">173</td><td colspan="7"></td></tr><tr><td class="h">174</td><td><div class="c3">48</div></td><td></td><td></td><td></td><td></td><td><div>13923</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @auth_fields = qw(client_id redirect_uri response_type scope);</td></tr>
<tr><td class="h">175</td><td><div class="c3">48</div></td><td></td><td></td><td></td><td></td><td><div>100</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for ( @auth_fields ) {</td></tr>
<tr><td class="h">176</td><td><div class="c3">192</div></td><td><div class="c0" title="-/F"><a href="lib-API-Instagram-pm--branch.html#L176">50</a></div></td><td><div class="c0"><a href="lib-API-Instagram-pm--condition.html#L176">0</a></div></td><td></td><td></td><td><div>570</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;carp &quot;ERROR: $_ required for generating authorization URL&quot; and return unless defined $self-&gt;$_;</td></tr>
<tr><td class="h">177</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">178</td><td colspan="7"></td></tr><tr><td class="h">179</td><td><div class="c3">48</div></td><td></td><td></td><td></td><td></td><td><div>313</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $uri = URI-&gt;new( $self-&gt;_authorize_url );</td></tr>
<tr><td class="h">180</td><td><div class="c3">48</div><div class="c3">192</div></td><td></td><td></td><td></td><td></td><td><div>482213</div><div>652</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uri-&gt;query_form( map { $_ =&gt; $self-&gt;$_ } @auth_fields );</td></tr>
<tr><td class="h">181</td><td><div class="c3">48</div></td><td></td><td></td><td></td><td></td><td><div>4606</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uri-&gt;as_string();</td></tr>
<tr><td class="h">182</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">183</td><td colspan="7"></td></tr><tr><td class="h">184</td><td colspan="7"></td></tr><tr><td class="h">185</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=method get_access_token</td></tr>
<tr><td class="h">186</td><td colspan="7"></td></tr><tr><td class="h">187</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $access_token = $instagram-&gt;get_access_token;</td></tr>
<tr><td class="h">188</td><td colspan="7"></td></tr><tr><td class="h">189</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or</td></tr>
<tr><td class="h">190</td><td colspan="7"></td></tr><tr><td class="h">191</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my ( $access_token, $auth_user ) = $instagram-&gt;get_access_token;</td></tr>
<tr><td class="h">192</td><td colspan="7"></td></tr><tr><td class="h">193</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">Returns the access token string if the context is looking for a scalar, or an</td></tr>
<tr><td class="h">194</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">array containing the access token string and the authenticated user</td></tr>
<tr><td class="h">195</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">L&lt;API::Instagram::User&gt; object if looking for a list value.</td></tr>
<tr><td class="h">196</td><td colspan="7"></td></tr><tr><td class="h">197</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=cut</td></tr>
<tr><td class="h">198</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub get_access_token {</td></tr>
<tr><td class="h">199</td><td><div class="c3">48</div></td><td></td><td></td><td><div class="c3"><a href="lib-API-Instagram-pm--subroutine.html#L199">48</a></div></td><td><div class="c0">0</div></td><td><div>69</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">200</td><td colspan="7"></td></tr><tr><td class="h">201</td><td><div class="c3">48</div></td><td></td><td></td><td></td><td></td><td><div>142</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @access_token_fields = qw(client_id redirect_uri grant_type client_secret code);</td></tr>
<tr><td class="h">202</td><td><div class="c3">48</div></td><td></td><td></td><td></td><td></td><td><div>82</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for ( @access_token_fields ) {</td></tr>
<tr><td class="h">203</td><td><div class="c3">240</div></td><td><div class="c3" title="T/F"><a href="lib-API-Instagram-pm--branch.html#L203">100</a></div></td><td><div class="c0"><a href="lib-API-Instagram-pm--condition.html#L203">50</a></div></td><td></td><td></td><td><div>1888</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;carp &quot;ERROR: $_ required for generating access token.&quot; and return unless defined $self-&gt;$_;</td></tr>
<tr><td class="h">204</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">205</td><td colspan="7"></td></tr><tr><td class="h">206</td><td><div class="c3">24</div><div class="c3">120</div></td><td></td><td></td><td></td><td></td><td><div>172</div><div>1298</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $data = { map { $_ =&gt; $self-&gt;$_ } @access_token_fields };</td></tr>
<tr><td class="h">207</td><td><div class="c3">24</div></td><td></td><td></td><td></td><td></td><td><div>481</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $json = $self-&gt;_request( &#39;post&#39;, $self-&gt;_access_token_url, $data, { token_not_required =&gt; 1 } );</td></tr>
<tr><td class="h">208</td><td colspan="7"></td></tr><tr><td class="h">209</td><td><div class="c3">24</div></td><td><div class="c0" title="T/-"><a href="lib-API-Instagram-pm--branch.html#L209">50</a></div></td><td></td><td></td><td></td><td><div>166</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wantarray ? ( $json-&gt;{access_token}, $self-&gt;user( $json-&gt;{user} ) ) : $json-&gt;{access_token};</td></tr>
<tr><td class="h">210</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">211</td><td colspan="7"></td></tr><tr><td class="h">212</td><td colspan="7"></td></tr><tr><td class="h">213</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=method media</td></tr>
<tr><td class="h">214</td><td colspan="7"></td></tr><tr><td class="h">215</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $media = $instagram-&gt;media( $media_id );</td></tr>
<tr><td class="h">216</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say $media-&gt;type;</td></tr>
<tr><td class="h">217</td><td colspan="7"></td></tr><tr><td class="h">218</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">Get information about a media object. Returns an L&lt;API::Instagram::Media&gt; object.</td></tr>
<tr><td class="h">219</td><td colspan="7"></td></tr><tr><td class="h">220</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=cut</td></tr>
<tr><td class="h">221</td><td><div class="c3">282</div></td><td></td><td></td><td><div class="c3"><a href="lib-API-Instagram-pm--subroutine.html#L221">282</a></div></td><td><div class="c0">0</div></td><td><div>880</div></td><td class="s">sub media { shift-&gt;_get_obj( &#39;Media&#39;, &#39;id&#39;, shift ) }</td></tr>
<tr><td class="h">222</td><td colspan="7"></td></tr><tr><td class="h">223</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=method user</td></tr>
<tr><td class="h">224</td><td colspan="7"></td></tr><tr><td class="h">225</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $me = $instagram-&gt;user; # Authenticated user</td></tr>
<tr><td class="h">226</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say $me-&gt;username;</td></tr>
<tr><td class="h">227</td><td colspan="7"></td></tr><tr><td class="h">228</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $user = $instagram-&gt;user( $user_id );</td></tr>
<tr><td class="h">229</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say $user-&gt;full_name;</td></tr>
<tr><td class="h">230</td><td colspan="7"></td></tr><tr><td class="h">231</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">Get information about an user. Returns an L&lt;API::Instagram::User&gt; object.</td></tr>
<tr><td class="h">232</td><td colspan="7"></td></tr><tr><td class="h">233</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=cut</td></tr>
<tr><td class="h">234</td><td><div class="c3">720</div></td><td></td><td><div class="c3"><a href="lib-API-Instagram-pm--condition.html#L234">100</a></div></td><td><div class="c3"><a href="lib-API-Instagram-pm--subroutine.html#L234">720</a></div></td><td><div class="c0">0</div></td><td><div>4272</div></td><td class="s">sub user { shift-&gt;_get_obj( &#39;User&#39;, &#39;id&#39;, shift // &#39;self&#39; ) }</td></tr>
<tr><td class="h">235</td><td colspan="7"></td></tr><tr><td class="h">236</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=method location</td></tr>
<tr><td class="h">237</td><td colspan="7"></td></tr><tr><td class="h">238</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $location = $instagram-&gt;location( $location_id );</td></tr>
<tr><td class="h">239</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say $location-&gt;name;</td></tr>
<tr><td class="h">240</td><td colspan="7"></td></tr><tr><td class="h">241</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">Get information about a location. Returns an L&lt;API::Instagram::Location&gt; object.</td></tr>
<tr><td class="h">242</td><td colspan="7"></td></tr><tr><td class="h">243</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=cut</td></tr>
<tr><td class="h">244</td><td><div class="c3">67</div></td><td></td><td></td><td><div class="c3"><a href="lib-API-Instagram-pm--subroutine.html#L244">67</a></div></td><td><div class="c0">0</div></td><td><div>238</div></td><td class="s">sub location { shift-&gt;_get_obj( &#39;Location&#39;, &#39;id&#39;, shift, 1 ) }</td></tr>
<tr><td class="h">245</td><td colspan="7"></td></tr><tr><td class="h">246</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=method tag</td></tr>
<tr><td class="h">247</td><td colspan="7"></td></tr><tr><td class="h">248</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $tag = $instagram-&gt;tag(&#39;perl&#39;);</td></tr>
<tr><td class="h">249</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say $tag-&gt;media_count;</td></tr>
<tr><td class="h">250</td><td colspan="7"></td></tr><tr><td class="h">251</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">Get information about a tag. Returns an L&lt;API::Instagram::Tag&gt; object.</td></tr>
<tr><td class="h">252</td><td colspan="7"></td></tr><tr><td class="h">253</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=cut</td></tr>
<tr><td class="h">254</td><td><div class="c3">571</div></td><td></td><td></td><td><div class="c3"><a href="lib-API-Instagram-pm--subroutine.html#L254">571</a></div></td><td><div class="c0">0</div></td><td><div>747</div></td><td class="s">sub tag { shift-&gt;_get_obj( &#39;Tag&#39;, &#39;name&#39;, shift ) }</td></tr>
<tr><td class="h">255</td><td colspan="7"></td></tr><tr><td class="h">256</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=method search</td></tr>
<tr><td class="h">257</td><td colspan="7"></td></tr><tr><td class="h">258</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $search = $instagram-&gt;search(&#39;user&#39;);</td></tr>
<tr><td class="h">259</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $users = $search-&gt;find( q =&gt; &#39;larry&#39; );</td></tr>
<tr><td class="h">260</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for my $user ( @$users ) {</td></tr>
<tr><td class="h">261</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say $user-&gt;username;</td></tr>
<tr><td class="h">262</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">263</td><td colspan="7"></td></tr><tr><td class="h">264</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">Returns an L&lt;API::Instagram::Search&gt; object, capable to search for the given B&lt;type&gt;.</td></tr>
<tr><td class="h">265</td><td colspan="7"></td></tr><tr><td class="h">266</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">Where B&lt;type&gt; can be: C&lt;user&gt;, C&lt;media&gt;, C&lt;tag&gt; or C&lt;location&gt;.</td></tr>
<tr><td class="h">267</td><td colspan="7"></td></tr><tr><td class="h">268</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">See L&lt;API::Instagram::Search&gt; for more details and examples.</td></tr>
<tr><td class="h">269</td><td colspan="7"></td></tr><tr><td class="h">270</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=cut</td></tr>
<tr><td class="h">271</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub search {</td></tr>
<tr><td class="h">272</td><td><div class="c3">46</div></td><td></td><td></td><td><div class="c3"><a href="lib-API-Instagram-pm--subroutine.html#L272">46</a></div></td><td><div class="c0">0</div></td><td><div>72</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">273</td><td><div class="c3">46</div></td><td></td><td></td><td></td><td></td><td><div>60</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $type = shift;</td></tr>
<tr><td class="h">274</td><td><div class="c3">46</div></td><td></td><td></td><td></td><td></td><td><div>211</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;API::Instagram::Search-&gt;new( type =&gt; $type )</td></tr>
<tr><td class="h">275</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">276</td><td colspan="7"></td></tr><tr><td class="h">277</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=method popular_medias</td></tr>
<tr><td class="h">278</td><td colspan="7"></td></tr><tr><td class="h">279</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $medias = $user-&gt;popular_medias( count =&gt; 3 );</td></tr>
<tr><td class="h">280</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print $_-&gt;caption . $/ for @$medias;</td></tr>
<tr><td class="h">281</td><td colspan="7"></td></tr><tr><td class="h">282</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">Returns a list of L&lt;API::Instagram::Media&gt; objects of Instagram most popular media at the moment.</td></tr>
<tr><td class="h">283</td><td colspan="7"></td></tr><tr><td class="h">284</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">=cut</td></tr>
<tr><td class="h">285</td><td colspan="7"></td></tr><tr><td class="h">286</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub popular_medias {</td></tr>
<tr><td class="h">287</td><td><div class="c3">48</div></td><td></td><td></td><td><div class="c3"><a href="lib-API-Instagram-pm--subroutine.html#L287">48</a></div></td><td><div class="c0">0</div></td><td><div>64</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">288</td><td><div class="c3">48</div></td><td></td><td></td><td></td><td></td><td><div>57</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $url&nbsp;&nbsp;= &quot;/media/popular&quot;;</td></tr>
<tr><td class="h">289</td><td><div class="c3">48</div></td><td><div class="c0" title="-/F"><a href="lib-API-Instagram-pm--branch.html#L289">50</a></div></td><td></td><td></td><td></td><td><div>166</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_medias( $url, { @_%2?():@_ } );</td></tr>
<tr><td class="h">290</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">291</td><td colspan="7"></td></tr><tr><td class="h">292</td><td><div class="c3">111</div></td><td></td><td></td><td><div class="c3"><a href="lib-API-Instagram-pm--subroutine.html#L292">111</a></div></td><td></td><td><div>183</div></td><td class="s">sub _comment { shift-&gt;_get_obj( &#39;Media::Comment&#39;, &#39;id&#39;, shift ) }</td></tr>
<tr><td class="h">293</td><td colspan="7"></td></tr><tr><td class="h">294</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#####################################################</td></tr>
<tr><td class="h">295</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Returns cached wanted object or creates a new one #</td></tr>
<tr><td class="h">296</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#####################################################</td></tr>
<tr><td class="h">297</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _get_obj {</td></tr>
<tr><td class="h">298</td><td><div class="c3">1751</div></td><td></td><td></td><td><div class="c3"><a href="lib-API-Instagram-pm--subroutine.html#L298">1751</a></div></td><td></td><td><div>2960</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my ( $self, $type, $key, $code, $optional_code ) = @_;</td></tr>
<tr><td class="h">299</td><td colspan="7"></td></tr><tr><td class="h">300</td><td><div class="c3">1751</div></td><td></td><td></td><td></td><td></td><td><div>2637</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $data = { $key =&gt; $code };</td></tr>
<tr><td class="h">301</td><td><div class="c3">1751</div></td><td><div class="c3" title="T/F"><a href="lib-API-Instagram-pm--branch.html#L301">100</a></div></td><td></td><td></td><td></td><td><div>3404</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data = $code if ref $code eq &#39;HASH&#39;;</td></tr>
<tr><td class="h">302</td><td><div class="c3">1751</div></td><td></td><td></td><td></td><td></td><td><div>2549</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$code = $data-&gt;{$key};</td></tr>
<tr><td class="h">303</td><td colspan="7"></td></tr><tr><td class="h">304</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Returns if CODE is not optional and not defined or if it&#39;s not a string</td></tr>
<tr><td class="h">305</td><td><div class="c3">1751</div></td><td><div class="c3" title="T/F"><a href="lib-API-Instagram-pm--branch.html#L305">100</a></div></td><td><div class="c3"><a href="lib-API-Instagram-pm--condition.html#L305">100</a></div><div class="c3"><a href="lib-API-Instagram-pm--condition.html#L305">100</a></div></td><td></td><td></td><td><div>14346</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return if (!$optional_code and !defined $code) or ref $code;</td></tr>
<tr><td class="h">306</td><td colspan="7"></td></tr><tr><td class="h">307</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Code used as cache key</td></tr>
<tr><td class="h">308</td><td><div class="c3">1515</div></td><td></td><td><div class="c0"><a href="lib-API-Instagram-pm--condition.html#L308">67</a></div></td><td></td><td></td><td><div>5598</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $cache_code = md5_hex( $code // $data);</td></tr>
<tr><td class="h">309</td><td colspan="7"></td></tr><tr><td class="h">310</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Returns cached value or creates a new object</td></tr>
<tr><td class="h">311</td><td><div class="c3">1515</div></td><td></td><td><div class="c0"><a href="lib-API-Instagram-pm--condition.html#L311">33</a></div></td><td></td><td></td><td><div>2863</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $return = $self-&gt;_cache($type)-&gt;{$cache_code} //= (&quot;API::Instagram::$type&quot;)-&gt;new( $data );</td></tr>
<tr><td class="h">312</td><td colspan="7"></td></tr><tr><td class="h">313</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Deletes cache if no-cache is set</td></tr>
<tr><td class="h">314</td><td><div class="c3">1515</div></td><td><div class="c3" title="T/F"><a href="lib-API-Instagram-pm--branch.html#L314">100</a></div></td><td></td><td></td><td></td><td><div>236762</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $self-&gt;_cache($type)-&gt;{$cache_code} if $self-&gt;no_cache;</td></tr>
<tr><td class="h">315</td><td colspan="7"></td></tr><tr><td class="h">316</td><td><div class="c3">1515</div></td><td></td><td></td><td></td><td></td><td><div>9668</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $return;</td></tr>
<tr><td class="h">317</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">318</td><td colspan="7"></td></tr><tr><td class="h">319</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">###################################</td></tr>
<tr><td class="h">320</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Returns a list of Media Objects #</td></tr>
<tr><td class="h">321</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">###################################</td></tr>
<tr><td class="h">322</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _medias {</td></tr>
<tr><td class="h">323</td><td><div class="c3">120</div></td><td></td><td></td><td><div class="c3"><a href="lib-API-Instagram-pm--subroutine.html#L323">120</a></div></td><td></td><td><div>541</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my ($self, $url, $params, $opts) = @_;</td></tr>
<tr><td class="h">324</td><td><div class="c3">120</div></td><td></td><td><div class="c0"><a href="lib-API-Instagram-pm--condition.html#L324">50</a></div></td><td></td><td></td><td><div>855</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$params-&gt;{count} //= 33;</td></tr>
<tr><td class="h">325</td><td><div class="c3">120</div></td><td></td><td></td><td></td><td></td><td><div>193</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$params-&gt;{url}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $url;</td></tr>
<tr><td class="h">326</td><td><div class="c3">120</div><div class="c3">168</div></td><td></td><td></td><td></td><td></td><td><div>782</div><div>477</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ map { $self-&gt;media($_) } $self-&gt;_get_list( { %$params, url =&gt; $url }, $opts ) ]</td></tr>
<tr><td class="h">327</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">328</td><td colspan="7"></td></tr><tr><td class="h">329</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">####################################################################</td></tr>
<tr><td class="h">330</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Returns a list of the requested items. Does pagination if needed #</td></tr>
<tr><td class="h">331</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">####################################################################</td></tr>
<tr><td class="h">332</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _get_list {</td></tr>
<tr><td class="h">333</td><td><div class="c3">120</div></td><td></td><td></td><td><div class="c3"><a href="lib-API-Instagram-pm--subroutine.html#L333">120</a></div></td><td></td><td><div>156</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;&nbsp;= shift;</td></tr>
<tr><td class="h">334</td><td><div class="c3">120</div></td><td></td><td></td><td></td><td></td><td><div>108</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $params = shift;</td></tr>
<tr><td class="h">335</td><td><div class="c3">120</div></td><td></td><td></td><td></td><td></td><td><div>121</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $opts&nbsp;&nbsp;&nbsp;= shift;</td></tr>
<tr><td class="h">336</td><td colspan="7"></td></tr><tr><td class="h">337</td><td><div class="c3">120</div></td><td></td><td><div class="c0"><a href="lib-API-Instagram-pm--condition.html#L337">50</a></div></td><td></td><td></td><td><div>372</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $url&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= delete $params-&gt;{url} || return [];</td></tr>
<tr><td class="h">338</td><td><div class="c3">120</div></td><td></td><td><div class="c3"><a href="lib-API-Instagram-pm--condition.html#L338">100</a></div></td><td></td><td></td><td><div>595</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $count&nbsp;&nbsp;&nbsp;&nbsp;= $params-&gt;{count} // 999_999_999;</td></tr>
<tr><td class="h">339</td><td><div class="c3">120</div></td><td><div class="c0" title="-/F"><a href="lib-API-Instagram-pm--branch.html#L339">50</a></div></td><td></td><td></td><td></td><td><div>220</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$count&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 999_999_999 if $count &lt; 0;</td></tr>
<tr><td class="h">340</td><td><div class="c3">120</div></td><td></td><td></td><td></td><td></td><td><div>139</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$params-&gt;{count} = $count;</td></tr>
<tr><td class="h">341</td><td colspan="7"></td></tr><tr><td class="h">342</td><td><div class="c3">120</div></td><td></td><td></td><td></td><td></td><td><div>248</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $request = $self-&gt;_request( &#39;get&#39;, $url, $params, $opts );</td></tr>
<tr><td class="h">343</td><td><div class="c3">120</div></td><td></td><td></td><td></td><td></td><td><div>153</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $data&nbsp;&nbsp;&nbsp;&nbsp;= $request-&gt;{data};</td></tr>
<tr><td class="h">344</td><td colspan="7"></td></tr><tr><td class="h">345</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Keeps requesting if total items is less than requested</td></tr>
<tr><td class="h">346</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# and still there is pagination</td></tr>
<tr><td class="h">347</td><td><div class="c3">120</div></td><td></td><td></td><td></td><td></td><td><div>312</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while ( my $pagination = $request-&gt;{pagination} ){</td></tr>
<tr><td class="h">348</td><td colspan="7"></td></tr><tr><td class="h">349</td><td><div class="c3">48</div></td><td><div class="c3" title="T/F"><a href="lib-API-Instagram-pm--branch.html#L349">100</a></div></td><td></td><td></td><td></td><td><div>100</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last if&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@$data &gt;= $count;</td></tr>
<tr><td class="h">350</td><td><div class="c3">24</div></td><td><div class="c0" title="-/F"><a href="lib-API-Instagram-pm--branch.html#L350">50</a></div></td><td></td><td></td><td></td><td><div>53</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last unless $pagination-&gt;{next_url};</td></tr>
<tr><td class="h">351</td><td colspan="7"></td></tr><tr><td class="h">352</td><td><div class="c3">24</div></td><td></td><td></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$opts-&gt;{prepared_url} = 1;</td></tr>
<tr><td class="h">353</td><td><div class="c3">24</div></td><td></td><td></td><td></td><td></td><td><div>48</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$request = $self-&gt;_request( &#39;get&#39;, $pagination-&gt;{next_url}, $params, $opts );</td></tr>
<tr><td class="h">354</td><td><div class="c3">24</div><div class="c3">24</div></td><td></td><td></td><td></td><td></td><td><div>96</div><div>75</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @$data, @{ $request-&gt;{data} };</td></tr>
<tr><td class="h">355</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">356</td><td colspan="7"></td></tr><tr><td class="h">357</td><td><div class="c3">120</div></td><td></td><td></td><td></td><td></td><td><div>422</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return @$data;</td></tr>
<tr><td class="h">358</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">359</td><td colspan="7"></td></tr><tr><td class="h">360</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">##############################################################</td></tr>
<tr><td class="h">361</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Requests the data from the given URL with QUERY parameters #</td></tr>
<tr><td class="h">362</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">##############################################################</td></tr>
<tr><td class="h">363</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _request {</td></tr>
<tr><td class="h">364</td><td><div class="c3">192</div></td><td></td><td></td><td><div class="c3"><a href="lib-API-Instagram-pm--subroutine.html#L364">192</a></div></td><td></td><td><div>356</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my ( $self, $method, $url, $params, $opts ) = @_;</td></tr>
<tr><td class="h">365</td><td colspan="7"></td></tr><tr><td class="h">366</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Verifies access requirements</td></tr>
<tr><td class="h">367</td><td><div class="c3">192</div></td><td><div class="c3" title="T/F"><a href="lib-API-Instagram-pm--branch.html#L367">100</a></div></td><td></td><td></td><td></td><td><div>4712</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless ( defined $self-&gt;access_token ) {</td></tr>
<tr><td class="h">368</td><td><div class="c3">72</div></td><td><div class="c3" title="T/F"><a href="lib-API-Instagram-pm--branch.html#L368">100</a></div></td><td><div class="c0"><a href="lib-API-Instagram-pm--condition.html#L368">67</a></div></td><td></td><td></td><td><div>9312</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( !$opts-&gt;{token_not_required} or !defined $self-&gt;client_id ) {</td></tr>
<tr><td class="h">369</td><td><div class="c3">48</div></td><td></td><td></td><td></td><td></td><td><div>7541</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;carp &quot;A valid access_token is required&quot;;</td></tr>
<tr><td class="h">370</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return {}</td></tr>
<tr><td class="h">371</td><td><div class="c3">48</div></td><td></td><td></td><td></td><td></td><td><div>855</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">372</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">373</td><td colspan="7"></td></tr><tr><td class="h">374</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# If URL is not prepared, prepares it</td></tr>
<tr><td class="h">375</td><td><div class="c3">144</div></td><td><div class="c3" title="T/F"><a href="lib-API-Instagram-pm--branch.html#L375">100</a></div></td><td></td><td></td><td></td><td><div>749</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless ( $opts-&gt;{prepared_url} ){</td></tr>
<tr><td class="h">376</td><td colspan="7"></td></tr><tr><td class="h">377</td><td><div class="c3">120</div></td><td></td><td></td><td></td><td></td><td><div>172</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$url =~ s|^/||;</td></tr>
<tr><td class="h">378</td><td><div class="c3">120</div></td><td></td><td></td><td></td><td></td><td><div>2931</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$params-&gt;{access_token} = $self-&gt;access_token;</td></tr>
<tr><td class="h">379</td><td colspan="7"></td></tr><tr><td class="h">380</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Prepares the URL</td></tr>
<tr><td class="h">381</td><td><div class="c3">120</div></td><td></td><td></td><td></td><td></td><td><div>737</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $uri = URI-&gt;new( $self-&gt;_endpoint_url );</td></tr>
<tr><td class="h">382</td><td><div class="c3">120</div></td><td></td><td></td><td></td><td></td><td><div>10149</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uri-&gt;path_segments( $uri-&gt;path_segments, split &#39;/&#39;, $url );</td></tr>
<tr><td class="h">383</td><td><div class="c3">120</div></td><td></td><td></td><td></td><td></td><td><div>8206</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uri-&gt;query_form($params);</td></tr>
<tr><td class="h">384</td><td><div class="c3">120</div></td><td></td><td></td><td></td><td></td><td><div>7613</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$url = $uri-&gt;as_string;</td></tr>
<tr><td class="h">385</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">386</td><td colspan="7"></td></tr><tr><td class="h">387</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# For debugging purposes</td></tr>
<tr><td class="h">388</td><td><div class="c3">144</div></td><td><div class="c0" title="-/F"><a href="lib-API-Instagram-pm--branch.html#L388">50</a></div></td><td></td><td></td><td></td><td><div>704</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print &quot;Requesting: $url$/&quot; if $self-&gt;_debug;</td></tr>
<tr><td class="h">389</td><td colspan="7"></td></tr><tr><td class="h">390</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Treats response content</td></tr>
<tr><td class="h">391</td><td><div class="c3">144</div></td><td></td><td></td><td></td><td></td><td><div>518</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $res = decode_json $self-&gt;_ua-&gt;$method( $url, [], $params )-&gt;decoded_content;</td></tr>
<tr><td class="h">392</td><td colspan="7"></td></tr><tr><td class="h">393</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Verifies meta node</td></tr>
<tr><td class="h">394</td><td><div class="c3">144</div></td><td></td><td></td><td></td><td></td><td><div>1592921</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $meta = $res-&gt;{meta};</td></tr>
<tr><td class="h">395</td><td><div class="c3">144</div></td><td><div class="c0" title="-/F"><a href="lib-API-Instagram-pm--branch.html#L395">50</a></div></td><td></td><td></td><td></td><td><div>411</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;carp &quot;$meta-&gt;{error_type}: $meta-&gt;{error_message}&quot; if $meta-&gt;{code} ne &#39;200&#39;;</td></tr>
<tr><td class="h">396</td><td colspan="7"></td></tr><tr><td class="h">397</td><td><div class="c3">343</div><div class="c3">343</div><div class="c3">343</div></td><td></td><td></td><td><div class="c3"><a href="lib-API-Instagram-pm--subroutine.html#L397">343</a></div></td><td></td><td><div>137685</div><div>1572970</div><div>59184</div></td><td class="s">use Data::Dumper;</td></tr>
<tr><td class="h">398</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># die Dumper $res;</td></tr>
<tr><td class="h">399</td><td><div class="c3">144</div></td><td></td><td></td><td></td><td></td><td><div>263</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$res;</td></tr>
<tr><td class="h">400</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">401</td><td colspan="7"></td></tr><tr><td class="h">402</td><td><div class="c3">466</div></td><td><div class="c3" title="T/F"><a href="lib-API-Instagram-pm--branch.html#L402">100</a></div></td><td></td><td><div class="c3"><a href="lib-API-Instagram-pm--subroutine.html#L402">466</a></div></td><td></td><td><div>1158</div></td><td class="s">sub _request_data { shift-&gt;_request(@_)-&gt;{data} || {} }</td></tr>
<tr><td class="h">403</td><td colspan="7"></td></tr><tr><td class="h">404</td><td><div class="c3">46</div></td><td></td><td></td><td><div class="c3"><a href="lib-API-Instagram-pm--subroutine.html#L404">46</a></div></td><td></td><td><div>506</div></td><td class="s">sub _del&nbsp;&nbsp;{ shift-&gt;_request_data( &#39;delete&#39;, @_ ) }</td></tr>
<tr><td class="h">405</td><td><div class="c3">352</div></td><td></td><td></td><td><div class="c3"><a href="lib-API-Instagram-pm--subroutine.html#L405">352</a></div></td><td></td><td><div>1895</div></td><td class="s">sub _get&nbsp;&nbsp;{ shift-&gt;_request_data( &#39;get&#39;,&nbsp;&nbsp;&nbsp;&nbsp;@_ ) }</td></tr>
<tr><td class="h">406</td><td><div class="c3">68</div></td><td></td><td></td><td><div class="c3"><a href="lib-API-Instagram-pm--subroutine.html#L406">68</a></div></td><td></td><td><div>353</div></td><td class="s">sub _post { shift-&gt;_request_data( &#39;post&#39;,&nbsp;&nbsp;&nbsp;@_ ) }</td></tr>
<tr><td class="h">407</td><td colspan="7"></td></tr><tr><td class="h">408</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">################################</td></tr>
<tr><td class="h">409</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Returns requested cache hash #</td></tr>
<tr><td class="h">410</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">################################</td></tr>
<tr><td class="h">411</td><td><div class="c3">2430</div></td><td></td><td></td><td><div class="c3"><a href="lib-API-Instagram-pm--subroutine.html#L411">2430</a></div></td><td></td><td><div>39103</div></td><td class="s">sub _cache { shift-&gt;_obj_cache-&gt;{ shift() } }</td></tr>
<tr><td class="h">412</td><td colspan="7"></td></tr><tr><td class="h">413 - 419</td><td colspan="6"></td><td class="s"><pre>=for Pod::Coverage client_id client_secret grant_type no_cache redirect_uri response_type scope BUILD

=for HTML &lt;a href=&quot;https://travis-ci.org/gabrielmad/API-Instagram&quot;&gt;&lt;img src=&quot;https://travis-ci.org/gabrielmad/API-Instagram.svg?branch=build%2Fmaster&quot;&gt;&lt;/a&gt;

=for HTML &lt;a href=&#39;https://coveralls.io/r/gabrielmad/API-Instagram?branch=build%2Fmaster&#39;&gt;&lt;img src=&#39;https://coveralls.io/repos/gabrielmad/API-Instagram/badge.png?branch=build%2Fmaster&#39; alt=&#39;Coverage Status&#39; /&gt;&lt;/a&gt;

=cut</pre></td></tr>
<tr><td class="h">420</td><td colspan="7"></td></tr><tr><td class="h">421</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">1;</td></tr>
</table>
</body>
</html>
